(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{193:function(e,t,a){e.exports=a(335)},198:function(e,t,a){},333:function(e,t,a){},335:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(23),s=a.n(i),o=(a(198),a(18)),l=a(19),c=a(22),u=a(20),m=a(21),d=a(79),h=a(7),p=a(338),f=a(337),g=a(339),b=a(3),E=a(25),v=a(16),w="https://memebackend.herokuapp.com",j=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={username:null,usenameError:null,passwordError:null,password:null},a.onChange=a.onChange.bind(Object(h.a)(Object(h.a)(a))),a.submitHandler=a.submitHandler.bind(Object(h.a)(Object(h.a)(a))),a.validate=a.validate.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"submitHandler",value:function(){var e,t,a=this;e=this.validate("username",this.state.username),t=this.validate("password",this.state.password),e||t?this.setState({usernameError:e,passwordError:t}):fetch(w+"/auth/login",{method:"POST",mode:"cors",headers:{"Access-control-allow-origin":"*","Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({username:this.state.username,password:this.state.password})}).then(function(e){return e.json()}).then(function(e){"success"!==e.status?(console.log(e),a.props.notification("error",e.message)):(localStorage.setItem("token",e.token),a.props.lognIn(e.user))}).catch(function(e){a.props.notification("error",e.toString())})}},{key:"onChange",value:function(e,t){var a,n=null,r=null;switch(e){case"username":n=this.validate(e,t);case"password":r=this.validate(e,t)}this.setState((a={},Object(E.a)(a,e,t),Object(E.a)(a,"usernameError","username"===e?n:this.state.usernameError),Object(E.a)(a,"passwordError","password"===e?r:this.state.passwordError),a))}},{key:"validate",value:function(e,t){switch(e){case"username":if(!t)return"Username is required";if(!/^([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5})$/.test(t))return"Invalid Username";break;case"password":if(!t)return"Password is required"}}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(b.h,{className:t.root},r.a.createElement(b.k,{variant:"title"},"Sign In"),r.a.createElement(b.f,null),r.a.createElement(b.i,{required:!0,error:!!this.state.usernameError,id:"username",label:"Username",margin:"normal",helperText:this.state.usernameError,onChange:function(t){return e.onChange("username",t.target.value)}}),r.a.createElement(b.i,{required:!0,id:"password",type:"password",error:!!this.state.passwordError,label:"Password",margin:"normal",helperText:this.state.passwordError,onChange:function(t){return e.onChange("password",t.target.value)}}),r.a.createElement("div",null,r.a.createElement(b.b,{onClick:this.submitHandler,variant:"outlined"},"Sign In"),r.a.createElement(b.b,{onClick:function(){return e.props.history.push("/signup")},className:t.signUp,variant:"outlined"},"Sign Up")))}}]),t}(n.Component),O=Object(v.withStyles)(function(e){return{root:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:e.palette.grey.A700,display:"flex",flexDirection:"column",padding:2*e.spacing.unit,minWidth:"40vw",boxShadow:e.shadows[13]},signUp:{float:"right"}}})(j),k=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={firstname:null,lastname:null,email:null,password:null,confirmPassword:null,firstnameError:null,lastnameError:null,emailError:null,passwordError:null,confirmPasswordError:null},a.onChange=a.onChange.bind(Object(h.a)(Object(h.a)(a))),a.validate=a.validate.bind(Object(h.a)(Object(h.a)(a))),a.onSubmit=a.onSubmit.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"onChange",value:function(e,t){var a,n=null,r=null,i=null,s=null,o=null;switch(e){case"email":i=this.validate(e,t);break;case"firstname":n=this.validate(e,t);break;case"lastname":r=this.validate(e,t);break;case"password":s=this.validate(e,t);break;case"confirmPassword":o=this.validate(e,t)}this.setState((a={},Object(E.a)(a,e,t),Object(E.a)(a,"firstnameError","firstname"===e?n:this.state.firstnameError),Object(E.a)(a,"lastnameError","lastname"===e?r:this.state.lastnameError),Object(E.a)(a,"passwordError","password"===e?s:this.state.passwordError),Object(E.a)(a,"emailError","email"===e?i:this.state.emailError),Object(E.a)(a,"confirmPasswordError","confirmPassword"===e?o:this.state.confirmPasswordError),a))}},{key:"validate",value:function(e,t){switch(e){case"email":if(!t)return"Email is required";if(!/^([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5})$/.test(t))return"Invalid Email";break;case"firstname":if(!t)return"First name is required";break;case"lastname":if(!t)return"Last name is required";break;case"password":if(!t)return"Password is required";break;case"confirmPassword":if(!t)return"Re-Type Password is required";if(t!==this.state.password)return"Not Matched"}}},{key:"onSubmit",value:function(){var e,t,a,n,r,i=this;e=this.validate("firstname",this.state.firstname),t=this.validate("lastname",this.state.lastname),a=this.validate("email",this.state.email),n=this.validate("password",this.state.password),r=this.validate("confirmPassword",this.state.confirmPassword),e||t||a||n||r?this.setState({firstnameError:e,lastnameError:t,emailError:a,passwordError:n,confirmPasswordError:r}):fetch(w+"/auth/signup",{method:"POST",mode:"cors",headers:{"Access-control-allow-origin":"*","Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({firstname:this.state.firstname,lastname:this.state.lastname,email:this.state.email,password:this.state.password,confirmPassword:this.state.confirmPassword})}).then(function(e){return e.json()}).then(function(e){"success"!==e.status?(console.log(e),i.props.notification("error",e.message)):(localStorage.setItem("token",e.token),i.props.lognIn(e.user))}).catch(function(e){i.props.notification("error",e.toString())})}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(b.h,{className:t.root},r.a.createElement(b.k,{variant:"title"},"Sign Up"),r.a.createElement(b.f,null),r.a.createElement(b.i,{required:!0,error:!!this.state.firstnameError,id:"firstname",label:"First Name",margin:"normal",helperText:this.state.firstnameError,onChange:function(t){return e.onChange("firstname",t.target.value)}}),r.a.createElement(b.i,{required:!0,error:!!this.state.lastnameError,id:"lastname",label:"Last Name",margin:"normal",helperText:this.state.lastnameError,onChange:function(t){return e.onChange("lastname",t.target.value)}}),r.a.createElement(b.i,{required:!0,error:!!this.state.emailError,id:"email",label:"Email",margin:"normal",helperText:this.state.emailError,onChange:function(t){return e.onChange("email",t.target.value)}}),r.a.createElement(b.i,{required:!0,error:!!this.state.passwordError,id:"password",label:"Password",margin:"normal",type:"password",helperText:this.state.passwordError,onChange:function(t){return e.onChange("password",t.target.value)}}),r.a.createElement(b.i,{required:!0,id:"confirmPassword",type:"password",error:!!this.state.confirmPasswordError,label:"Re-Type Password",margin:"normal",helperText:this.state.confirmPasswordError,onChange:function(t){return e.onChange("confirmPassword",t.target.value)}}),r.a.createElement("div",null,r.a.createElement(b.b,{onClick:this.onSubmit,variant:"outlined"},"Sign Up"),r.a.createElement(b.b,{onClick:function(){return e.props.history.goBack()},className:t.signUp,variant:"outlined"},"Back")))}}]),t}(n.Component),y=[{path:"/signin",component:O},{path:"/signup",component:Object(v.withStyles)(function(e){return console.log(e),{root:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:e.palette.grey.A700,display:"flex",flexDirection:"column",padding:2*e.spacing.unit,minWidth:"40vw",boxShadow:e.shadows[13]},signUp:{float:"right"}}})(k)},{redirect:!0,to:"/signin"}],C=Object(v.withStyles)(function(e){return{root:{background:e.palette.grey.A700},title:{flexGrow:"1"},greeting:{padding:"0 "+e.spacing.unit+"px",fontSize:3*e.spacing.unit}}})(function(e){var t=e.classes;return r.a.createElement("div",null,r.a.createElement(b.a,{className:t.root},r.a.createElement(b.j,null,r.a.createElement(b.k,{className:t.title,variant:"title"},"MemeCreater"),r.a.createElement(b.b,{onClick:function(){return e.push("/home/create")}},"Add Post"),r.a.createElement(b.k,{className:t.greeting},"Hi, "+e.user.firstname),r.a.createElement(b.b,{variant:"outlined"},"Log Out"))))}),x=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).uplaod=null,a.state={imageLink:null,isCustom:!1,customText:[],text:null,data:[]},a.addCustomImage=a.addCustomImage.bind(Object(h.a)(Object(h.a)(a))),a.getImage=a.getImage.bind(Object(h.a)(Object(h.a)(a))),a.uplaodHandler=a.uplaodHandler.bind(Object(h.a)(Object(h.a)(a))),a.textHandler=a.textHandler.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"uplaodHandler",value:function(){var e=this,t=localStorage.getItem("token");if(this.state.text&&this.state.imageLink){var a=new FormData;this.state.isCustom||a.set("post",this.uplaod.files[0]),a.set("caption",this.state.text),a.set("imageLink",this.state.isCustom?this.state.imageLink:""),fetch(w+"/post/upload/"+this.props.user.userId,{method:"POST",mode:"cors",body:a,headers:{"Access-control-allow-origin":"*",Authorization:"Bearer "+t}}).then(function(e){return e.json()}).then(function(t){e.props.push("/home/all")}).catch(function(e){return console.log(e)})}else this.props.notification("error","Missing Input or Image(Please select Custom or Own Image)")}},{key:"textHandler",value:function(e){this.setState({text:e})}},{key:"addCustomImage",value:function(e){var t=this.state.data.filter(function(t){return t.customId===e})[0];this.setState({imageLink:w+t.imageLink,isCustom:!0,customText:t.text}),this.uplaod.value=null}},{key:"getImage",value:function(e){console.log(e);var t=new FileReader;t.onload=function(e){this.setState({imageLink:e.target.result,isCustom:!1,customText:[]})}.bind(this),t.readAsDataURL(e.target.files[0])}},{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token");fetch(w+"/custom/all",{method:"GET",mode:"cors",headers:{"Access-control-allow-origin":"*",Authorization:"Bearer "+t,"Content-Type":"application/json; charset=UTF-8"}}).then(function(e){return e.json()}).then(function(t){"success"===t.status?e.setState({data:t.custom}):e.props.notification("error","not able to get custom image")})}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",{className:t.content},r.a.createElement(b.h,{className:t.editor},r.a.createElement("div",{className:t.customImageGallery},r.a.createElement(b.g,{style:{height:"400px"},cols:3,cellHeight:180},this.state.data.map(function(t,a){return r.a.createElement("img",{onClick:function(){return e.addCustomImage(t.customId)},key:a,alt:"custom",src:w+t.imageLink})}))),r.a.createElement("span",null,"--or--"),r.a.createElement("div",{className:t.ownImage},r.a.createElement("input",{ref:function(t){return e.uplaod=t},onChange:function(t){return e.getImage(t)},name:"post",type:"file",accept:"image/*"}),r.a.createElement("br",null),r.a.createElement(b.i,{required:!0,id:"caption",label:"caption",margin:"normal",variant:"outlined",onChange:function(t){return e.textHandler(t.target.value)},className:t.caption}))),r.a.createElement(b.h,{className:t.imageView},this.state.imageLink&&r.a.createElement("img",{width:"300px",height:"300px",alt:"post",src:this.state.imageLink}),r.a.createElement("div",{className:t.action},r.a.createElement(b.b,{onClick:this.uplaodHandler,variant:"outlined"},"Uplaod"),r.a.createElement(b.b,{className:t.cancel,onClick:function(){return e.props.push("/home/all")},variant:"outlined"},"Canel"))))}}]),t}(n.Component),S=Object(v.withStyles)(function(e){return console.log(e),{content:{width:"100",height:"100%",display:"grid",gridTemplateColumns:"2fr 1fr",padding:2*e.spacing.unit,gridColumnGap:2*e.spacing.unit+"px"},editor:{padding:2*e.spacing.unit,display:"flex",flexDirection:"column"},customImageGallery:{background:e.palette.grey[300],flex:2,overflowY:"scroll"},ownImage:{flex:1},caption:{width:"100%"},cancel:{float:"right"},imageView:{display:"flex",position:"relative",padding:e.spacing.unit,flexDirection:"column",alignItems:"center"},action:{position:"absolute",left:"0",bottom:"0",padding:e.spacing.unit,width:"100%"}}})(x),I=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).uplaod=null,a.state={posts:[],selected:0},a.selecthandler=a.selecthandler.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"selecthandler",value:function(e){this.setState({selected:e})}},{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token");fetch(w+"/post/all",{method:"GET",mode:"cors",headers:{"Access-control-allow-origin":"*",Authorization:"Bearer "+t,"Content-Type":"application/json; charset=UTF-8"}}).then(function(e){return e.json()}).then(function(t){"success"===t.status?e.setState({posts:t.posts}):e.props.notification("error",t.message)}).catch(function(t){e.props.notification("error",t)})}},{key:"render",value:function(){var e=this;console.log(this.state.posts);var t=this.props.classes;return r.a.createElement("div",{className:t.content},r.a.createElement(b.h,{className:t.posts},this.state.posts.map(function(a,n){return r.a.createElement(b.c,{onClick:function(){return e.selecthandler(n)},className:t.card,key:n},r.a.createElement(b.d,{component:"img",image:w+a.imageURL}))})),r.a.createElement(b.h,{className:t.postDetails},this.state.posts.filter(function(t,a){return a==e.state.selected}).map(function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("div",null,r.a.createElement("img",{width:"300px",height:"300px",alt:e.caption,src:w+e.imageURL})),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(b.b,null,"Like")),r.a.createElement("div",null,r.a.createElement(b.b,null,"Download"))),r.a.createElement("div",null,e.comments.map(function(e,t){return r.a.createElement("div",{key:t},e.comment)})),r.a.createElement("div",null,r.a.createElement(b.i,{required:!0,id:"comment",label:"comment",margin:"normal",variant:"outlined"})),r.a.createElement("div",null,r.a.createElement(b.b,null,"Add Comment")))})))}}]),t}(n.Component),N=Object(v.withStyles)(function(e){return console.log(e),{content:{width:"100",height:"100%",display:"grid",gridTemplateColumns:"3fr 1fr",padding:2*e.spacing.unit,gridColumnGap:2*e.spacing.unit+"px"},posts:{display:"grid",gridTemplateColumns:" 1fr 1fr 1fr 1fr",padding:2*e.spacing.unit,gridColumnGap:2*e.spacing.unit+"px"},postDetails:{display:"flex",padding:2*e.spacing.unit,flexDirection:"column",alignItems:"center"},card:{height:"200px",objectFit:"cover"}}})(I),T=[{path:"/home",name:"Home",component:function(e){function t(e){var a;return Object(o.a)(this,t),a=Object(c.a)(this,Object(u.a)(t).call(this,e)),console.log(a.props),a.state={creatPost:!0},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(C,{push:this.props.history.push,user:this.props.user}),".",r.a.createElement("div",{className:"content"},r.a.createElement(g.a,{path:"/home/create",render:function(t){return r.a.createElement(S,Object.assign({},t,{push:e.props.history.push,user:e.props.user,notification:e.props.notification}))}}),r.a.createElement(g.a,{path:"/home/all",render:function(t){return r.a.createElement(N,Object.assign({},t,{push:e.props.history.push,user:e.props.user,notification:e.props.notification}))}})))}}]),t}(n.Component)},{redirect:!0,to:"/home/all"}],P=(a(333),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={notification:[],user:null},a.addNotification=a.addNotification.bind(Object(h.a)(Object(h.a)(a))),a.removeNotification=a.removeNotification.bind(Object(h.a)(Object(h.a)(a))),a.lognIn=a.lognIn.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"addNotification",value:function(e,t){this.setState({notification:Object(d.a)(this.state.notification).concat([{type:e,message:t}])})}},{key:"removeNotification",value:function(){if(this.state.notification.length>0){var e=Object(d.a)(this.state.notification);e.pop(),this.setState({notification:e})}}},{key:"lognIn",value:function(e){this.setState({user:e})}},{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token");t&&fetch(w+"/user/details",{method:"GET",mode:"cors",headers:{"Access-control-allow-origin":"*","Content-Type":"application/json; charset=UTF-8",Authorization:"Bearer "+t}}).then(function(e){return e.json()}).then(function(t){"success"!==t.status?e.addNotification("error",t.message):e.setState({user:t.user})}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this,t=null;return this.state.notification.length>0&&(t=this.state.notification.map(function(t,a){return r.a.createElement(b.h,{key:a,className:"notification"},r.a.createElement("p",{style:{color:function(e){switch(e){case"error":return"red";case"success":return"green";default:return"black"}}(t.type)}},t.message),r.a.createElement(b.f,null),r.a.createElement("br",null),r.a.createElement(b.b,{style:{float:"right"},onClick:e.removeNotification,variant:"outlined"},"Close"))})),r.a.createElement("div",{className:"main-root"},t,r.a.createElement(p.a,null,this.state.user?T.map(function(t,a){return t.redirect?r.a.createElement(f.a,{key:a,to:t.to}):r.a.createElement(g.a,{key:a,path:t.path,render:function(a){return r.a.createElement(t.component,Object.assign({user:e.state.user,lognIn:e.lognIn,notification:e.addNotification},a))}})}):y.map(function(t,a){return t.redirect?r.a.createElement(f.a,{key:a,to:t.to}):r.a.createElement(g.a,{key:a,path:t.path,render:function(a){return r.a.createElement(t.component,Object.assign({lognIn:e.lognIn,notification:e.addNotification},a))},extra:!0})})))}}]),t}(n.Component)),A=a(336),U=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(b.e,null),r.a.createElement(A.a,null,r.a.createElement(P,null)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[193,2,1]]]);
//# sourceMappingURL=main.d7262af1.chunk.js.map